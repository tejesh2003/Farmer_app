<div class="max-w-xl mx-auto p-4">
  <div class="mb-6">
    <label *ngIf="!cropTouched" for="cropInput" class="block text-lg font-medium text-gray-700 mb-2">
      Enter crop name:
    </label>
    <input
      *ngIf="!cropTouched"
      id="cropInput"
      type="text"
      [(ngModel)]="crop"
      placeholder="e.g. Wheat"
      class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-green-300"
    />

    <div class="mt-4 flex space-x-2">
      <button
        *ngIf="!cropTouched"
        (click)="getFarmersByCrop()"
        class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition"
      >
        Get Farmers
      </button>
      <button
        *ngIf="cropTouched"
        (click)="resetCropSearch()"
        class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition"
      >
        Search Crop Again
      </button>
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center text-gray-500 mt-4">
    Loading farmers...
  </div>

  <div *ngIf="farmers.length > 0 && !isLoading" class="space-y-4">
    <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Farmers growing <span class="text-green-600">{{ crop }}</span>:
    </h3>
    <div
      *ngFor="let farmer of farmers"
      class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm"
    >
      <p class="text-lg font-bold text-gray-900">{{ farmer.name }}</p>
      <p class="text-gray-700">{{ farmer.phone }} | {{ farmer.language }}</p>
      <p class="text-sm text-gray-600">Farm IDs: {{ farmer.farm_ids.join(', ') }}</p>
      <p class="text-sm text-gray-600">Country: {{ farmer.country}}</p>
    </div>
  </div>

  <div *ngIf="farmers.length === 0 && cropTouched && !isLoading" class="mt-6">
    <p class="text-red-500 text-center font-medium">
      No farmers found for crop "<strong>{{ crop }}</strong>".
    </p>
  </div>
</div>
